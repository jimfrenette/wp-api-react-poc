!function(){"use strict";var t=window.wp.element,e=window.React;class n extends e.Component{constructor(t){super(t),this.state={error:null,heading:"Submit New Post",loading:!1,post_id:null,post_title:null,post_content:null,posts:[]}}newPost(t){}putPost(t){fetch(`${wp_api_react_poc.rest_url}wp/v2/posts/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":wp_api_react_poc.nonce},body:JSON.stringify(t)}).then((()=>{})).catch((t=>{console.error(t)}))}componentDidMount(){this.setState({loading:!0},(()=>{let t=`?author=${wp_api_react_poc.current_user_id}&status=any`;return fetch(`${wp_api_react_poc.rest_url}wp/v2/posts/${t}`,{method:"GET",headers:{"X-WP-Nonce":wp_api_react_poc.nonce}}).then((t=>t.json())).then((t=>{this.setState({posts:t,loading:!1})})).catch((t=>{console.error(t)}))}))}handleSubmit(t){t.preventDefault(),this.state.post_id?this.putPost({id:this.state.post_id,title:this.state.post_title,content:this.state.post_content}):this.newPost({title:this.state.post_title,content:this.state.post_content})}handleContentChange(t){this.setState({post_content:t.target.value})}handleTitleChange(t){this.setState({post_title:t.target.value})}handleTitleClick(t,e){console.log(e),this.setState({post_id:e.id}),this.setState({post_title:e.title.rendered}),this.setState({post_content:e.content.rendered})}render(){let e;return e=this.state.loading?(0,t.createElement)("div",null,"Loading..."):this.state.posts.map(((e,n)=>(0,t.createElement)("div",null,(0,t.createElement)("a",{html:"#",onClick:t=>this.handleTitleClick(t,e)},e.title.rendered)))),(0,t.createElement)("div",null,(0,t.createElement)("form",{onSubmit:t=>this.handleSubmit(t)},(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Title"),(0,t.createElement)("input",{type:"text",required:"","aria-required":"true",defaultValue:this.state.post_title,onChange:t=>this.handleTitleChange(t)})),(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Content"),(0,t.createElement)("textarea",{rows:"8",cols:"20",defaultValue:this.state.post_content,onChange:t=>this.handleContentChange(t)})),(0,t.createElement)("input",{type:"submit",value:"Submit"})),(0,t.createElement)("div",null,e))}}var s=n;const{render:l,useState:a}=wp.element;l((0,t.createElement)(s,null),document.getElementById("react-app"))}();